@using WebApp.Models.Account
@model AccountViewModel;

<h3>Account</h3>
<div class="row">
    <div class="d-flex align-items-center">
        <div class="col-md-4">
            <div class="form-group">
                <label asp-for="FirstName" class="control-label p-1"></label>
                <input asp-for="FirstName" class="form-control" value="@Model.FirstName" disabled />
            </div>
            <div class="form-group">
                <label asp-for="LastName" class="control-label p-1"></label>
                <input asp-for="LastName" class="form-control" value="@Model.LastName" disabled />
            </div>

            <label asp-for="Balance" class="control-label p-1"></label>
            <div class="input-group">
                <input asp-for="Balance" class="form-control" value="@Model.Balance" disabled />
                <div class="input-group-append">
                    <span class="input-group-text">$</span>
                </div>
            </div>
        </div>
        <div class="col-md-3 p-2 mt-3">
            <div class="p-2">
                <a href="~/Transaction/Deposit/@Model.Id">
                    <input type="button" value="Deposit Transaction" class="btn btn-info text-white text-bolded" />
                </a>
            </div>
            <div class="p-2">
                <a href="~/Transaction/Withdraw/@Model.Id">
                    <input type="button" value="Withdraw Transaction" class="btn btn-info text-white text-bolded"/>
                </a>
            </div>
            <div class="p-2">
                <a href="~/Transaction/Transfer/@Model.Id">
                    <input type="button" value="Transfer Transaction" class="btn btn-info text-white text-bolded"/>
                </a>
            </div>
        </div>
        <div class="col-md-4 p-2 mt-3">
            <div class="p-2">
                <div>
                    <label class="p-2"> From: </label>
                    <input type="datetime-local" id="from-report-date" class="form-control" value="@DateTime.Now"/>
                </div>
                <div>
                    <label class="p-2"> To:</label>
                    <input type="datetime-local" id="to-report-date" class="form-control" value="@DateTime.Now"/>
                </div>
            </div>
            <div class="p-2">
                <a id="report-link" href="~/Account/Report/@Model.Id">
                    <input type="button" id="report-button" value="Get Report" class="btn btn-outline-secondary text-bolded"/>
                </a>
            </div>
        </div>
    </div>
    <div class="form-group m-2">
        <div class="d-flex align-items-center p-1 row">
            <div class="col-2">
                <h5 class="p-2">Transactions</h5>
            </div>
            <div class="col-2">
                <a href="~/Transaction/Index/@Model.Id?PageNumber=1&PageSize=8">
                    <input type="button" value="View All Transacitons" class="p-2 btn btn-info text-bolded text-white" />
                </a>
            </div>
            <div class="col-4"></div>
            <div class="col-2">
                <a href="~/Report/GetAllReportsForAccount/@Model.Id">
                    <input type="button" class="btn btn-info text-bolded text-white" value="Mothly Reports"/>
                </a>
            </div>
        </div>
        <div class="p-3">
            <table class="table">
                <thead>
                    <tr>
                        <th>Amount</th>
                        <th>Operation Type</th>
                        <th>Destiantion Account</th>
                        <th>Destination Name</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Transactions)
                    {
                        <tr>
                            <td>@item.Amount</td>
                            <td>@item.OperationType</td>
                            @if (item.DestinationAccountId != null)
                            {
                                <td>@item.DestinationAccountId</td>
                                <td>@item.DestinationFirstName @item.DestinationLastName</td>
                            }
                            else
                            {
                                <td> - </td>
                                <td> - </td>
                            }
                            <td>
                                <a href="~/Transaction/Details/@Model.Id/@item.Id">
                                    <input type="button" value="Details" class="btn btn-outline-dark"/>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <div class="p-2">
            <a href="~/Account/Overview/@Model.UserId" >
                <input type="button" class="btn btn-secondary p-1 text-bolded" value="Back to My Accounts" />
            </a>
        </div>
    </div>
</div>